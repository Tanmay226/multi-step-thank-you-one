<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>multi step form </title>
</head>

<body>

    <section class="sign-up-sec">
        <div class="container-fluid">
            <div class="row g-0">
                <div class="col-md-6">
                    <div class="sign-up-left-part">
                        <p class="bottom-text">Â© <a href="#">VueMotion</a> 2024</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="sign-up-right-part">
                        <!-- form start -->

                        <div class="form-container">
                            <form action="" class="custom-form">
                                <div class="form-step-indicators ">
                                    <button class="step-indicator active"></button>
                                    <button class="step-indicator"></button>
                                    <button class="step-indicator"></button>
                                </div>
                                <div class="form-num-indecator">
                                    <span>1/3</span>
                                    <span>Let's start!</span>
                                </div>
                                <!-- ./indicator -->

                                <div class="carousel">
                                    <div class="inner ">
                                        <div class="sub-forms">
                                            <div class="sub-form" data-index="0">
                                                <div class="top-header">
                                                    <h2>Sign up</h2>

                                                </div>
                                                <p>Please fill out the form below to create your account</p>
                                                <div class="row gy-lg-4 gx-lg-3">
                                                    <div class="col-lg-6">
                                                        <div class="form-group">
                                                            <label for="first-name">First Name*</label>
                                                            <input type="text" class="form-control" id="first-name"
                                                                placeholder="Enter you first name" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <div class="form-group">
                                                            <label for="last-name">Last Name*</label>
                                                            <input type="text" class="form-control" id="last-name"
                                                                placeholder="Enter you last name" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="form-group">
                                                            <label for="emai">Email</label>
                                                            <input type="email" class="form-control" id="emai"
                                                                placeholder="Enter your email" />
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="form-group">
                                                            <label for="password">Create Password</label>
                                                            <input type="email" id="password" class="form-control"
                                                                placeholder="Create your password" />
                                                        </div>
                                                    </div>
                                                    <div class="col-12">
                                                        <div class="form-group checkbox">
                                                            <label for="checkbox">
                                                                <input type="checkbox" name="" id=""> By clicking Sign
                                                                up,
                                                                you agree to our <a href="#"> Terms and Conditions</a>
                                                                and
                                                                <a href="#">Privacy Policy</a>including our cookie use.
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12">
                                                        <div class="form-group form-button">
                                                            <input class="custom-btn" type="button" value="submit" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ./row -->
                                                <div class="other-sign-up-box">
                                                    <div class="devider">Or</div>
                                                    <div class="common-btn"><img src="./images/g-icon.png" alt=""> Sign
                                                        in with Google</div>
                                                </div>
                                            </div>
                                            <div class="sub-form" data-index="1">
                                                <div class="form-floating mb-3">
                                                    <input class="form-control" type="text" name="Email" id="email"
                                                        placeholder="email">
                                                    <label for="emai">Email</label>
                                                </div>
                                                <div class="form-floating mb-2">
                                                    <input class="form-control" type="text" name="username"
                                                        id="userName" placeholder="username">
                                                    <label for="userName">Username</label>
                                                </div>
                                            </div>
                                            <div class="sub-form" data-index="2">
                                                <div class="form-floating mb-3">
                                                    <input class="form-control" type="password" name="password"
                                                        id="password" placeholder="Password">
                                                    <label for="password">Password</label>
                                                </div>
                                                <div class="form-floating mb-2">
                                                    <input class="form-control" type="password" name="password"
                                                        id="confirmPassword" placeholder="Confirm password">
                                                    <label for="confirmPassword">Confirm password</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- action button -->
                                <div class="form-actions ms-auto mt-2 ">
                                    <button id="prev" class="btn btn-secondary d-none">Previous</button>
                                    <button id="next" class="btn btn-primary">Next</button>
                                </div>

                            </form>

                        </div>
                        <!-- form end -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Option 2: Separate Popper and Bootstrap JS -->

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>

    <!-- custom js -->
    <script>

        const parentForm = document.querySelector("form.form");
        const subFormsWrapper = parentForm.querySelector(".carousel .sub-forms");
        const subForms = subFormsWrapper.querySelectorAll(".sub-form");
        const nextStepBtn = document.getElementById("next");
        const prevStepBtn = document.getElementById("prev");
        const stepsIndicators = Array.from(document.querySelectorAll(".form-step-indicators button.step-indicator"));
        let activeStepIndex = 0;

        stepsIndicators.forEach(e => {
            e.addEventListener("click", e => { e.preventDefault() })
        })

        nextStepBtn.addEventListener("click", e => {
            e.preventDefault();
            if (checkEmptysubForm())
                nextStepBtn.innerText.toLowerCase() == "next" ? nextStep() : endFormJourney();
        });

        prevStepBtn.addEventListener("click", e => {
            e.preventDefault();
            prevStep()
        });

        //Form steps carousel
        //I know i could use bootstrap pre-made carousel

        function nextStep() {
            prevStepBtn.classList.remove("d-none");
            let transBy = subForms[activeStepIndex].clientWidth * ++activeStepIndex * -1;
            //Check if we reached the last step
            if (activeStepIndex >= subForms.length - 1)
                nextStepBtn.innerText = "Finish";
            slide(transBy);
        }

        function prevStep() {
            nextStepBtn.innerText = "Next";
            let transBy = subForms[activeStepIndex].clientWidth * --activeStepIndex * -1;
            //Check if we are at the first step
            if (activeStepIndex < 1)
                prevStepBtn.classList.add("d-none");
            slide(transBy);
        }


        function slide(slideBy) {
            subFormsWrapper.style.setProperty("--transX", `${ slideBy }px`);
            updateIndicators();
        }

        function updateIndicators() {
            stepsIndicators.forEach(indic => {
                indic.classList.remove("active");
            });
            stepsIndicators[activeStepIndex].classList.add("active")
        }

        function checkEmptysubForm() {
            const subFormIndex = activeStepIndex;
            const subFormInputs = Array.from(subForms[subFormIndex].querySelectorAll("input"));
            let validsubForm = true;
            subFormInputs.forEach(inpt => {
                if (!inpt.value) {
                    inpt.classList.add("is-invalid");
                    validsubForm = false;
                } else {
                    inpt.classList.remove("is-invalid");
                }
            });
            return validsubForm;
        }

        //When the form is ended remove hte form element from the document 


        //Since party function needs a button to be triggred
        //I made a div of 2 buttons space between
        //And set an interavl to click them for 1.5sec
        function toggleParty(finishBox) {
            const partyTogglerBtns = Array.from(finishBox.querySelectorAll(".party-confetti-toggler-btns .party-toggler"));
            partyTogglerBtns.forEach(btn => {
                btn.addEventListener("click", e => { party.confetti(e.target) });
            });

            //Toggle the party animation every 1.5sec
            //SetTimeout just to run the animation at first time without any animation collisions
            partyTogglerBtns.forEach(btn => { btn.click() });
            setTimeout(() => {
                setInterval(() => {
                    partyTogglerBtns.forEach(btn => { btn.click() });
                }, 1500);
            }, 1000);
        }
    </script>
</body>

</html>